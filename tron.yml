app:
  name: "tron"
  env: "dev"
  version: "v0.0.0"
  host: "127.0.0.1"
  enableStat: true
  enableMetrics: true
  enableHTTPProfile: true
  enableLimit: true
  enableCircuitBreaker: true
  enableTrace: false
  tracingSamplingRate: 1.0
  sutdownTimeoutSecond: 30
  cacheType: "redis"

http:
  port: 8080
  timeout: 30

logger:
  level: "info"
  format: "console"
  isSave: true
  logFileConfig:
    filename: "out.log"
    maxSize: 20
    maxBackups: 50
    maxAge: 15
    isCompression: true


database:
  driver: "mysql"
  cMysql:
    dsn: "root:bivdex123456@(127.0.0.1:3306)/itc?parseTime=true&loc=Local&charset=utf8,utf8mb4"
    enableLog: true
    maxIdleConns: 10
    maxOpenConns: 100
    connMaxLifetime: 30
  aMysql:
    dsn: "root:bivdex123456@(127.0.0.1:3306)/ita?parseTime=true&loc=Local&charset=utf8,utf8mb4"
    enableLog: true
    maxIdleConns: 10
    maxOpenConns: 100
    connMaxLifetime: 30

  bMysql:
    dsn: "root:bivdex123456@(127.0.0.1:3306)/itb?parseTime=true&loc=Local&charset=utf8,utf8mb4"
    enableLog: true
    maxIdleConns: 10
    maxOpenConns: 100
    connMaxLifetime: 30

  fMysql:
    dsn: "root:bivdex123456@(127.0.0.1:3306)/itf?parseTime=true&loc=Local&charset=utf8,utf8mb4"
    enableLog: true
    maxIdleConns: 10
    maxOpenConns: 100
    connMaxLifetime: 30

redis:
  dsn: "default:w48690812@127.0.0.1:6379/0"
  dialTimeout: 10
  readTimeout: 2
  writeTimeout: 2
  queueConfig:
    stream: "order_events"
    group: "order_processing_group"
    dlqStream: "order_dlq"
    maxRetries: 3
    consumerName: "consumer-"
    blockTimeout: 5
    pendingCheckInterval: 5
    maxPendingAge: 30


# jaeger settings
jaeger:
  agentHost: "127.0.0.1"
  agentPort: 6831

tronGas:
  baseUrl: ""
  apiKey: ""

pollingService:
  matcherPollerInterval: 30 #轮询时间 60s
  matcherPollerBatchSize: 20 #10 (每次轮询处理的订单数量)
  matcherName: "pendingMatch" #用于生成唯一的 matcherID 前缀
  matcherLockTimeout: 20 # 订单锁定超时时间 120s
  matcherPollerMaxWorkers: 3 #并发处理订单数
  matcherPollerSingleOrderTimeout: 25 #单个订单匹配+处理的超时 20s
  matcherPollerShutdownTimeout: 3 #轮询服务优雅关闭的超时时间 10s

chain:
  mainAddresses:
    address: "TW7MZp8AJZPNbzJb2SCEMiFKz2oj6prRn1"
    privateKey: "BzQYgwHU9gvH+Rm/KcG1bMBwB9iQxqq2Y1VJ3bbokgfW7peIPNx9eqPtwM4/MBMW6+PUYKxEmsqZ+KHKvRQrCjVy6x4aSUzmAq6UAplugzc="
    userId: "ca609288-a87a-490b-b630-809cb29d1506"
    usdt: 50000     # 主地址USDT余额低于此值时触发补足告警
    trx: 10000      # 主地址TRX余额低于此值时触发补足告警 => sun

  currentNodePreference: "selfBuilt"
  official:
    - url: "grpc.trongrid.io:50051"
      apiKey: "18b3dea4-55ec-424f-b3c1-ffdd9264e00d"
      timeOut: 15
    - url: "grpc.trongrid.io:50051"
      apiKey: "445a6d39-2ceb-4e41-98d2-17f2a9d19fcf"
      timeOut: 15
    - url: "grpc.trongrid.io:50051"
      apiKey: "de0daace-7ea6-40c3-bd9f-3851cffec9e4"
      timeOut: 15
  selfBuilt:
    - url: "grpc.trongrid.io:50051"
      apiKey: "7fb4edd3-7639-4122-a953-9f62a24b448a"
      timeOut: 15
    - url: "grpc.trongrid.io:50051"
      apiKey: "150debee-e301-4de8-b3e8-bac5dc523c48"
      timeOut: 15
    - url: "grpc.trongrid.io:50051"
      apiKey: "bcbf4b0f-0fcd-4ccf-9ab0-4e2e2defa134"
      timeOut: 15
  thirdParty:
    - url: "grpc.trongrid.io:50051"
      apiKey: "4f5a5d53-6068-4b5e-9626-8341aae0b786"
      timeOut: 15


  contracts:
    - name: "USDT"
      type: "trc20"
      contract: "TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t"
      issuer: "THPvaUhoh2Qn2y9THCZML3H815hhFhn5YC"
      decimal: 6
    - name: "BTT"
      type: "trc10"
      contract: "1002000"
      issuer: "TF5Bn4cJCT6GVeUgyCN4rBhDg42KBrpAjg"
  feeLimit: 15000
  orderWorker: 5


  # 能量调用模式配置
  energyDetector:
    enable: true
    pollIntervalSeconds: 3
    blockWindow: 3
    targetTrxAmountsSun:
      - 100000
      - 200000
      - 300000
      - 400000
      - 500000
      - 600000
      - 700000
      - 800000
      - 900000
      - 1000000
      - 1100000
      - 1200000
      - 1300000
      - 1400000
      - 1500000
      - 1600000
      - 1700000
      - 1800000
      - 1900000
      - 2000000
    minEnergyReceived: 60000
    maxEnergyReceived: 70000
    cachePruneIntervalMinutes: 10
    initialScanBlockOffset: 100 # 首次启动回扫100个块
    initialScanBlock: 57548951 # 区块开始高度
    persistLastBlockKey: "energy_detector:last_processed_block"
    baseEnergy: 65000
    emptyAddressEnergy: 131000
    maxTrxCost: 500000    # 允许的最大TRX消耗量 sun
    sunPerEnergy: 200  # 1带宽≈200 SUN
    energyConfirmTimeoutSec: 6 #s
    energyConfirmIntervalSec: 3  #s
    energyCallRetryDelayHours: 48  #h



  platform: #平台
    - platformName: "catFee"
      apiKey: "5e141fb1-50ec-4f5f-97e9-c4d013da0032"
      apiSecret: "f03e116056a5d10cb0a3b8b87cf02430"
      baseURL: "https://api.catfee.io"
      rentDurationMinutes: 1h  #1h


  # 转账规则参数
  transferRules:
    activationTrx: 2000000            # 地址激活所需TRX
    usdtSupplyAmount: 1000000000     # USDT划转量
    trxSupplyAmount: 2500000       # TRX补充量
    maxPerTransfer: 1000000000       # 单笔限额（USDT）
    minTargetBalance: 100000000      # 目标地址最低余额（USDT）
    matchTimeWindow: 30        # 匹配订单时间窗口（分钟）
    dailyMaxTransfers: 3       # 日最大转账次数
    cztimes2Timeout: 10         # CZtimes=2的超时时间（分钟）
